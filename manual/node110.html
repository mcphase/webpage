<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2017.2 (Released Jan 23, 2017) -->
<HTML>
<HEAD>
<TITLE>Programs display_densities - display of the superstructure and excitations</TITLE>
<META NAME="description" CONTENT="Programs display_densities - display of the superstructure and excitations">
<META NAME="keywords" CONTENT="manual">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META NAME="Generator" CONTENT="LaTeX2HTML v2017.2">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="manual.css">

<LINK REL="next" HREF="node111.html">
<LINK REL="previous" HREF="node109.html">
<LINK REL="up" HREF="node107.html">
<LINK REL="next" HREF="node111.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html1957"
  HREF="node111.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html1951"
  HREF="node107.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html1945"
  HREF="node109.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html1953"
  HREF="node8.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1955"
  HREF="node152.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1958"
  HREF="node111.html">Program hkl, hkl2d and</A>
<B> Up:</B> <A NAME="tex2html1952"
  HREF="node107.html">Programs for Graphical display</A>
<B> Previous:</B> <A NAME="tex2html1946"
  HREF="node109.html">Programs display_density - display</A>
 &nbsp; <B>  <A NAME="tex2html1954"
  HREF="node8.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html1956"
  HREF="node152.html">Index</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H2><A NAME="SECTION000203000000000000000"></A><A NAME="10089"></A><A NAME="displaydensities"></A>
<BR>
Programs <I CLASS="slanted">display_densities</I>  - display of the superstructure
and excitations
</H2>

<P>
The program <I CLASS="slanted">display_densities</I><A NAME="10092"></A> 
can be used simply to popout spin/exchange field configuration 
and also to display a 3d animation of spin/moment/densities, even including a movie of
excitations.

<P>

<DIV ALIGN="CENTER"><A NAME="spingraphic"></A><A NAME="10246"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 18:</STRONG>
Calculated Spin-Structure of NdCu<SPAN CLASS="MATH"><IMG
 WIDTH="11" HEIGHT="29" ALIGN="MIDDLE" BORDER="0"
 SRC="img1.png"
 ALT="$_2$"></SPAN> at <SPAN CLASS="MATH"><IMG
 WIDTH="32" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img15.png"
 ALT="$T=$"></SPAN>&nbsp;1.5&nbsp;K and <SPAN CLASS="MATH"><IMG
 WIDTH="47" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img16.png"
 ALT="$H=0$"></SPAN>.
[plot created by program <I CLASS="slanted">display_densities</I><A NAME="10098"></A>]</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">

<IMG
 WIDTH="360" HEIGHT="443" ALIGN="BOTTOM" BORDER="0"
 SRC="img939.png"
 ALT="\includegraphics[angle=0, width=1.0\textwidth]{figsrc/ndcu2b/resultss/spinsab.eps}">

</DIV></TD></TR>
</TABLE>
</DIV>

<P>
<DL>
<DT><STRONG> display_densities -f[c 12 0.1] mcphas.sps T Ha Hb Hc</STRONG></DT>
<DD>
</DD>
<DT><STRONG> display_densities -f mcphas.sps x y</STRONG></DT>
<DD>
</DD>
<DT><STRONG> display_densities -f mcphas.sps n</STRONG></DT>
<DD>if used with -f filename this file has to be a mcphas.mf or mcphas.sps or mcphas.tst file,
the spin configuration
   at given temperature T[K] and magnetic effective field H[T]
    is read and extracted from this file and printed on screen (stdout), nothing
 else is done. Insterad of temperature and magnetic field also the x y point coordinates
in the phasediagram or the index n (from the sequence of spin configuartions) can be given.
the option -fc 12 0.1 displays a commented user readable information about the 12 largerst
spin components in the primitive unit cell with absolute values larger than 0.1 (useful for
inspection of numbers).
</DD>
<DT><STRONG> display_densities -tMSL -prefix 001  T Ha Hb Hc</STRONG></DT>
<DD>
</DD>
<DT><STRONG> display_densities -tHex -prefix 001T Ha Hb Hc</STRONG></DT>
<DD>
</DD>
<DT><STRONG> display_densities -tI -prefix 001T Ha Hb Hc</STRONG></DT>
<DD>if used with -t... output to stdout a table with T Ha Hb Hc atom positions and
for -tMSL 
              magnetic moments <!-- MATH
 $\langle Mx \rangle \langle My \rangle \langle Mz \rangle$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="118" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img940.png"
 ALT="$\langle Mx \rangle \langle My \rangle \langle Mz \rangle$"></SPAN>, orbital moments and spin 
              of each atom in the magnetic unitc cell , for 
       -tHex  exchange fields and for 
       -tI    with expectation values of interaction operators <!-- MATH
 $\langle I \rangle$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="24" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img941.png"
 ALT="$\langle I \rangle$"></SPAN>.

<P>
</DD>
<DT><STRONG>display_densities -c<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-s<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-o<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-m<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-j-p i j k<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-div-S<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-L<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-M-P-prefix 001T Ha Hb Hc [h k l E]</STRONG></DT>
<DD>
</DD>
<DT><STRONG>display_densities -c<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-s<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-o<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-m<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-j-p i j k<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-div-S<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-L<SPAN CLASS="MATH"><IMG
 WIDTH="8" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img731.png"
 ALT="$\vert$"></SPAN>-M-P-prefix 001x y</STRONG></DT>
<DD>if used without a filename, the information is read from results/mcphas.* res
ults/mcdisp.*
   output files and 3d graphical animations are created.
</DD>
</DL> 
<PRE>
   options are:
         -c ... calculate chargedensity
         -s ... calculate spindensity
         -o ... calculate angular orbital momentum density
         -m ... calculate magnetic moment density
         -j ... calculate currentdensity
         -p i j k ... calculate projection of spin/orbital/current/magnetic moment density
                  along direction i j k, e.g. 0 0 1
         -div    ... calculate divergence of spin/orbital/current/magnetic moment density
         -S  ... show arrow indicating spin
         -L  ... show arrow indicating orbital angular momentum
         -M  ... show arrow indicating magnetic moment
         -P  ... calculate phononic displacement
         note, that in order to animate changes in the above quantities, the corresponding
         switch has to be enabled in the mcdisp calculation (mcdisp.par) and the single ion
         modules have to be capable of calculating the corresponding observables.
 
         -prefix 001 ... use input file(s) results/001mc* instead of results/mc*
 
   examples:
        display_densities -c 2 0 0 1
        ...calculates the charge density at T=2K and H=(0,0,1) Tesla
        display_densities  -tI 2 0 0 1 
        ... outputs a table with atomic positions and expectations values &lt;I&gt;
</PRE>

<P>

<DIV ALIGN="CENTER"><A NAME="chargegraphic"></A><A NAME="10247"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figure 19:</STRONG>
Calculated 4f Charge-Structure of NdCu<SPAN CLASS="MATH"><IMG
 WIDTH="11" HEIGHT="29" ALIGN="MIDDLE" BORDER="0"
 SRC="img1.png"
 ALT="$_2$"></SPAN> at <SPAN CLASS="MATH"><IMG
 WIDTH="32" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img15.png"
 ALT="$T=$"></SPAN>&nbsp;1.5&nbsp;K and <SPAN CLASS="MATH"><IMG
 WIDTH="47" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img16.png"
 ALT="$H=0$"></SPAN>.
[plot created by program <I CLASS="slanted">display_densities</I><A NAME="10111"></A>]</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">

<IMG
 WIDTH="264" HEIGHT="292" ALIGN="BOTTOM" BORDER="0"
 SRC="img942.png"
 ALT="\includegraphics[angle=0, width=0.7\textwidth]{figsrc/ndcu2b/resultss/chargesab.eps}">

</DIV></TD></TR>
</TABLE>
</DIV>

<P>
The program can be used to calculate (partial) chargedensity for the unfilled shells
 of magnetic ions in  a magnetic unit cell, which has been calculated by <I CLASS="slanted">mcphas</I> and
 stored in <I CLASS="slanted">mcphas.mf</I> for a specific temperature and magnetic field.
   For the calculation of the charge density the  formula are used as given in
appendix&nbsp;<A HREF="node138.html#chargedensityoperator">L</A>. 
In order to do so <I CLASS="slanted">display_densities</I><A NAME="10118"></A>  requires input files and the result of a
full <I CLASS="slanted">mcphas</I> simulation.
Alternatively, <I CLASS="slanted">display_densities</I><A NAME="10121"></A>
can  calculate the spindensity, the orbital magnetic moment density, the total magnetic
moment density (in Trammel gauge) and the (orbital) electric current density.

<P>
The program outputs a magnetic structure (and magnetic excitation)
  graphic/movie in the output files of different format:
  results/spins*.eps (postscript), results/spins*.fst (fp_studio),
  results/spins.out (ascii) and results/spins*.jvx (javaview).

<P>
Output files:

<OL>
<LI>encapsulated postscript ps-file <I CLASS="slanted">results/spins*.eps</I>
                  of a spin/orbital/totalmagnetic moment configuration, 
</LI>
<LI>the files <I CLASS="slanted">results/spins.fst</I> and <I CLASS="slanted">results/spins_prim.fst</I> are created, 
                which can be read by the fullprof program <I CLASS="slanted">fp_studio</I>
                for on screen display<A NAME="10127"></A> of a spin/orbital/totalmagnetic moment configuration,
</LI>
<LI>the configuration of expectation values <!-- MATH
 $\langle\mathbf I\rangle$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="23" HEIGHT="31" ALIGN="MIDDLE" BORDER="0"
 SRC="img943.png"
 ALT="$\langle\mathbf I\rangle$"></SPAN> (or whatever is stored in the file addressed by the option -f)
                 is printed to stdout - therefore this program can be used with option <I CLASS="slanted">-f results/mcphas.mf</I> 
			       to generate an input file
			       for program <I CLASS="slanted">McDisp</I> (example: <I CLASS="slanted">spins -f results/mcphas.mf 1 1 0 0  <SPAN CLASS="MATH"><IMG
 WIDTH="16" HEIGHT="29" ALIGN="MIDDLE" BORDER="0"
 SRC="img96.png"
 ALT="$&gt;$"></SPAN> mcdisp.mf</I>)  
</LI>
<LI>the text file <I CLASS="slanted">results/spins.out</I> is created, which is useful to produce input files for
              the diffraction program <I CLASS="slanted">mcdiff<A NAME="10132"></A></I> (done in the script <I CLASS="slanted">setup_mcdiff_in</I>)
</LI>
<LI>the graphics files <I CLASS="slanted">results/spins.jvx</I> and <I CLASS="slanted">results/spins_prim.jvx</I>, which can be displayed
         by the program <I CLASS="slanted">javaview</I>, e.g. by the command <I CLASS="slanted">java javaview spin_prim.jvx</I>.
</LI>
<LI>if <I CLASS="slanted">spins</I> is used with arguments <I CLASS="slanted">h k l E(meV)</I>, it takes the eigenvectors of magnetic 
excitations
        from files <I CLASS="slanted">results/mcdisp.q*</I>  created by <I CLASS="slanted">mcdisp</I>) and produces a graphical
        animation of the spin osciallation which is associated with this magnetic mode. The output is a series
        of files <I CLASS="slanted">results/spins.*.jvx</I> and <I CLASS="slanted">results/spins_prim.*.jvx</I> which can be viewed by program
        <I CLASS="slanted">javaview</I>, e.g. by the command <I CLASS="slanted">java javaview "model=results/spins_prim.*.jvx" 
        Animation.LastKey=16 background="255 255 255"</I>.  <I CLASS="slanted">javaview</I> is also able to produce a sequence
		of gif files (press c in the animation window), which can then be processed by an animation editor
		to generate an animation, which can be inserted in presentations. For example, you can use
 <I CLASS="slanted">Imagemagick</I> graphics package (has to be installed separately!)
        to create an animation. The following command will issue a proper gif animation, which you can include in 
           power point        
        presentations etc.: <I CLASS="slanted">convert -delay 1 -size 100x100 -loop 1 geomAnim.*.gif output.gif</I>.
 
</LI>
</OL>

<P>
Note, in case of non-orthogonal axes the convention 
                           for applied field <SPAN CLASS="MATH"><IMG
 WIDTH="84" HEIGHT="30" ALIGN="MIDDLE" BORDER="0"
 SRC="img138.png"
 ALT="$Ha, Hb, Hc$"></SPAN> 
                            is <SPAN CLASS="MATH"><IMG
 WIDTH="41" HEIGHT="40" ALIGN="MIDDLE" BORDER="0"
 SRC="img210.png"
 ALT="$Hb\vert\vert\vec b$"></SPAN>, <!-- MATH
 $Hc||(\vec a \times \vec b)$
 -->
<SPAN CLASS="MATH"><IMG
 WIDTH="81" HEIGHT="40" ALIGN="MIDDLE" BORDER="0"
 SRC="img211.png"
 ALT="$Hc\vert\vert(\vec a \times \vec b)$"></SPAN> and <SPAN CLASS="MATH"><IMG
 WIDTH="27" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img142.png"
 ALT="$Ha$"></SPAN> perpendicular to <SPAN CLASS="MATH"><IMG
 WIDTH="25" HEIGHT="15" ALIGN="BOTTOM" BORDER="0"
 SRC="img143.png"
 ALT="$Hb$"></SPAN> and <SPAN CLASS="MATH"><IMG
 WIDTH="25" HEIGHT="16" ALIGN="BOTTOM" BORDER="0"
 SRC="img144.png"
 ALT="$Hc$"></SPAN>.

<P>
The graphics output format can be fine tuned in <I CLASS="slanted">results/graphic_parameters.set</I> 
  by  <I CLASS="slanted">spins_scale_moment</I>,
<I CLASS="slanted">show_abc_unitcell, show_primitive_crystal_unitcell, show_magnetic_unitcell, show_atoms, 
scale_view_1,
scale_view_2, scale_view_3</I>,  
<I CLASS="slanted">spins_wave_amplitude, spins_show_ellipses, spins_show_direction_of_static_moment</I>.
<I CLASS="slanted">show_abc_unitcell, show_primitive_crystal_unitcell, show_magnetic_unitcell, show_atoms, 
show_density</I>...

<P>
Technical information: the program <I CLASS="slanted">display_densities</I><A NAME="10156"></A> 
is actually a script which
calls  <I CLASS="slanted">spins<A NAME="10157"></A></I> 
 (a program with the same arguments as <I CLASS="slanted">display_densities</I>
which calculates the iso surfaces and stores
it in format for the java based graphic program <I CLASS="slanted">javaview</I> and
also as a grid. The way in which this is done is controlled by 
the parameter file <I CLASS="slanted">results/graphic_parameters.set</I>
.... in  order to display the results graphically the following java
programs are called:
<PRE>
  java javaview results/spins.jvx
  java javaview "model=results/spins.*.jvx" Animation.LastKey=16 background="255 255 255"
</PRE>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html1957"
  HREF="node111.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html1951"
  HREF="node107.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html1945"
  HREF="node109.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html1953"
  HREF="node8.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html1955"
  HREF="node152.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> 
<BR>
<B> Next:</B> <A NAME="tex2html1958"
  HREF="node111.html">Program hkl, hkl2d and</A>
<B> Up:</B> <A NAME="tex2html1952"
  HREF="node107.html">Programs for Graphical display</A>
<B> Previous:</B> <A NAME="tex2html1946"
  HREF="node109.html">Programs display_density - display</A>
 &nbsp; <B>  <A NAME="tex2html1954"
  HREF="node8.html">Contents</A></B> 
 &nbsp; <B>  <A NAME="tex2html1956"
  HREF="node152.html">Index</A></B> </DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
