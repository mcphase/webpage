<!DOCTYPE HTML>

<!--Converted with LaTeX2HTML 2024.2 (Released October 21, 2024) -->
<HTML lang="en">
<HEAD>
<TITLE>Starting a fit</TITLE>

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="viewport" CONTENT="width=device-width, initial-scale=1.0">
<META NAME="Generator" CONTENT="LaTeX2HTML v2024.2">

<LINK REL="STYLESHEET" HREF="manual.css">

<LINK REL="next" HREF="node131.html">
<LINK REL="previous" HREF="node129.html">
<LINK REL="next" HREF="node131.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A
 HREF="node131.html">
<IMG WIDTH="37" HEIGHT="24" ALT="next" SRC="next.png"></A> 
<A
 HREF="node125.html">
<IMG WIDTH="26" HEIGHT="24" ALT="up" SRC="up.png"></A> 
<A
 HREF="node129.html">
<IMG WIDTH="63" HEIGHT="24" ALT="previous" SRC="prev.png"></A> 
<A ID="tex2html1020"
  HREF="node7.html">
<IMG WIDTH="65" HEIGHT="24" ALT="contents" SRC="contents.png"></A> 
<A ID="tex2html1022"
  HREF="node164.html">
<IMG WIDTH="43" HEIGHT="24" ALT="index" SRC="index.png"></A> 
<BR>
<B> Next:</B> <A
 HREF="node131.html">Stopping a fit/parameter space</A>
<B> Up:</B> <A
 HREF="node125.html">Searchspace and Simannfit -</A>
<B> Previous:</B> <A
 HREF="node129.html">analysing the results of</A>
 &nbsp; <B>  <A ID="tex2html1021"
  HREF="node7.html">Contents</A></B> 
 &nbsp; <B>  <A ID="tex2html1023"
  HREF="node164.html">Index</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H2><A ID="SECTION000215000000000000000">
Starting a fit</A>
</H2>

<P>
If the program <I CLASS="slanted">calcsta</I> has been set up, the fitting is started
by the command (in the example you should go to the directory <I CLASS="slanted">/mcphas/examples/cecu2a/fit</I>) 
:

<P>
<BLOCKQUOTE>
<I CLASS="slanted">simannfit 10 [-t 1000][-s 100000] [-n 200] mcphas.jjj [and possible other input parameter files]</I>.

</BLOCKQUOTE>

<P>

<UL>
<LI>The &rdquo;10&rdquo; in the command means that the initial statistical
&rdquo;temperature&rdquo; of the algorithm
is set to 10.  
</LI>
</UL>

<P>
OPTIONS for ...

<UL>
<LI>STEPWIDTHS
<DL>
<DT><STRONG>-w 1.4</STRONG></DT>
<DD>before starting simannfit, multiply all stepwidths by factor 1.4 
</DD>
<DT><STRONG>-r 0.2</STRONG></DT>
<DD>before starting simannfit, set all stepwidths to parameter 
            range=max-min times 0.2, 
</DD>
<DT><STRONG>-f 0.2</STRONG></DT>
<DD>before starting simannfit, set all stepwidths to parameter value 
            times 0.2, however never smaller than parameterrange/1000 
</DD>
<DT><STRONG>-p 20</STRONG></DT>
<DD>probing parameter space: stepwidths are not decreased during
	    fitting, new set of pars <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.68ex; vertical-align: -0.57ex; " SRC="img1049.svg"
 ALT="$parn$"></SPAN> are generated and for all sets par in 
	    <I CLASS="slanted">results/simannfit.p</I> and <I CLASS="slanted">results/simannfit.n</I> are scanned and
	    distance <!-- MATH
 $d=\sum_i^N (par_i-parn_i)^2/stepwidth_i^2$
 -->
<SPAN CLASS="MATH"><IMG
 STYLE="height: 3.20ex; vertical-align: -0.81ex; " SRC="img1050.svg"
 ALT="$d=\sum_i^N (par_i-parn_i)^2/stepwidth_i^2$"></SPAN> is calculated. If
<SPAN CLASS="MATH"><IMG
 STYLE="height: 1.93ex; vertical-align: -0.21ex; " SRC="img1051.svg"
 ALT="$d&gt;N $"></SPAN>(=number of parameters)
	    for all sets par, then <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.66ex; vertical-align: -0.12ex; " SRC="img1052.svg"
 ALT="$sta$"></SPAN> is calculated. if  <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.75ex; vertical-align: -0.21ex; " SRC="img1053.svg"
 ALT="$sta&lt;=sta$"></SPAN> of initial parameters
	    then <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.68ex; vertical-align: -0.57ex; " SRC="img1049.svg"
 ALT="$parn$"></SPAN> is appended to the list in <I CLASS="slanted">results/simannfit.p</I>
	    up to 20 parameters are appended to this list, after that the program stops.
	    the program also stops if step ratio reaches a value <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.81ex; vertical-align: -0.21ex; " SRC="img1054.svg"
 ALT="$&gt; 11$"></SPAN> (step ratio 
	    is a factor applied to all (maximum) stepwidths before generating a step in the random walk
	    It is decreased each successful step in the random walk and increased to find an
	    acceptable step (distance criteria) to try
	    thus, to probe a large region of parameter space do not set statistical
	    temperature too low to enable efficient stepping. On the other hand to
	    probe only the vicinity of a optimum in every direction of parameter
	    space a small statistical inital temperature is necessary
	    - in this way a series of equally good solutions can be explored.
</DD>
</DL>
</LI>
<LI>PARALLEL PROCESSING
<DL>
<DT><STRONG>-s0 filename</STRONG></DT>
<DD>instead of results/simannfit.n use filename to store/read 
</DD>
<DT><STRONG>-s1 filename</STRONG></DT>
<DD>instead of results/simannfit.p use filename to store/read 
</DD>
<DT><STRONG>-i 23</STRONG></DT>
<DD>for storing in results/simannfit.* use index .23 instead of .0 as suffix 
</DD>
</DL>
</LI>
<LI>LOGGING 
<DL>
<DT><STRONG>-n 50</STRONG></DT>
<DD>allows to store every 50 steps the parametersets in a table in  <I CLASS="slanted">results/simannfit.n</I>
 (appending existing file).
</DD>
<DT><STRONG>-jpglog 3.5e-1 file.jpg</STRONG></DT>
<DD>if sta is less then 3.5e-1, then the image file.jpg 
            (which should be created by calcsta) is copied to results/parsetnr.jpg
            a html tag is added to results/simannfit.n or results/simannfit.p if 
	    stored
</DD>
<DT><STRONG>-log 1.3 batchfile.bat</STRONG></DT>
<DD>if sta is less then 3.5e-1, then execute the file 
             batchfile, with sta as argument, which can be adressed in the batch
	     file with $1 (linux) or  %1 (windows)
</DD>
<DT><STRONG>-h</STRONG></DT>
<DD>Histograms are store in results/par*.hst for review of the variation 
             of parameters during the run of simannfit. 
</DD>
<DT><STRONG>-d </STRONG></DT>
<DD>store percentage of different contributions to sta in file results/simannfit.dst 
</DD>
</DL>
</LI>
<LI>TERMINATION 
<DL>
<DT><STRONG>-l 0.2</STRONG></DT>
<DD>sets limit - program will end if <SPAN CLASS="MATH"><IMG
 STYLE="height: 1.81ex; vertical-align: -0.21ex; " SRC="img1055.svg"
 ALT="$sta&lt;0.2$"></SPAN>
</DD>
<DT><STRONG>-t 100</STRONG></DT>
<DD>sets time limit until program end to 100 seconds
</DD>
<DT><STRONG>-s 132</STRONG></DT>
<DD>gives maximal number of iteration steps 132 to be done
</DD>
<DT><STRONG>-c</STRONG></DT>
<DD>continue at end of program - do not ask for pressing enter 
</DD>
</DL>
</LI>
</UL>
Note that the user written program <I CLASS="slanted">calcsta</I> has to be in the
directory where <I CLASS="slanted">simannfit<A ID="4544"></A></I> is started from.

<P>
The program generates for each parameter a histogram file showing the number of occurrences
of a certain parameter value in solutions, where sta decreased.

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A
 HREF="node131.html">
<IMG WIDTH="37" HEIGHT="24" ALT="next" SRC="next.png"></A> 
<A
 HREF="node125.html">
<IMG WIDTH="26" HEIGHT="24" ALT="up" SRC="up.png"></A> 
<A
 HREF="node129.html">
<IMG WIDTH="63" HEIGHT="24" ALT="previous" SRC="prev.png"></A> 
<A ID="tex2html1020"
  HREF="node7.html">
<IMG WIDTH="65" HEIGHT="24" ALT="contents" SRC="contents.png"></A> 
<A ID="tex2html1022"
  HREF="node164.html">
<IMG WIDTH="43" HEIGHT="24" ALT="index" SRC="index.png"></A> 
<BR>
<B> Next:</B> <A
 HREF="node131.html">Stopping a fit/parameter space</A>
<B> Up:</B> <A
 HREF="node125.html">Searchspace and Simannfit -</A>
<B> Previous:</B> <A
 HREF="node129.html">analysing the results of</A>
 &nbsp; <B>  <A ID="tex2html1021"
  HREF="node7.html">Contents</A></B> 
 &nbsp; <B>  <A ID="tex2html1023"
  HREF="node164.html">Index</A></B> </DIV>
<!--End of Navigation Panel-->

</BODY>
</HTML>
